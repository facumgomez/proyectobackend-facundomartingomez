<div class='container-fluid d-flex justify-content-between align-items-center bg-primary text-white p-4 px-5'>
  <a href='/products' class='btn btn-primary'>E-Commerce</a>
  <div class='d-flex align-items-center gap-2'>
    <a href='/profile' class='btn btn-primary'>Mi perfil</a>
    <a href='/products' class='btn btn-primary'>Productos</a>
    <a href='/carts/{{cid}}' class='btn btn-primary'>Mi carrito</a>
    <a href='/chat' class='btn btn-primary'>Chat</a>
  </div>
  <a href='/api/sessions/logout' class='btn btn-primary'>Logout</a>  
</div>

<div class='container-fluid d-flex justify-content-center align-items-center bg-black text-white p-3 mb-5'>
  <h1>Mi carrito</h1>
</div>

{{#if products.length}}
  <div class='container d-flex flex-column align-items-center'>
    <table class='table align-middle text-center'>
      <thead>
        <tr>
          <th scope='col'>Producto</th>
          <th scope='col'>Nombre</th>
          <th scope='col'>Cantidad</th>
          <th scope='col'>Precio</th>
          <th scope='col'>Eliminar del carrito</th>
        </tr>
      </thead>
      <tbody>
        {{#each products}}
          <tr>
            <th scope='row'><img  class='col' style='max-width: 100px;' src='{{this.thumbnail}}' alt='{{this.title}}'></th>
            <td>{{this.title}}</td>
            <td>{{this.quantity}}</td>
            <td>${{this.price}}</td>
            <td><button onclick="deleteProduct('{{this.cid}}', '{{this._id}}')" class='btn btn-danger'>Eliminar</button></td>
          </tr>
        {{/each}}
      </tbody>
    </table>          
    <div class='gap-4 mt-4'>
      <button onclick="clearCart('{{cid}}')" class='btn btn-primary'>Vaciar carrito</button>
      <button onclick="purchase('{{cid}}')" class='btn btn-primary'>Realizar compra</button>
      <button data-bs-toggle='modal' data-bs-target='#modal' class='btn btn-primary'>Info.</button>
    </div>
  </div>
  {{else}}
    <div class='container d-flex flex-column align-items-center justify-content-center h-50'>
      <h1 style='max-width: 600px; text-align: center;'>Tú carrito se encuentra vacío!</h1>
    </div>
{{/if}}

<div class='modal fade' id='modal' tabindex='-1' aria-labelledby='modalLabel' aria-hidden='true'>
	<div class='modal-dialog'>
		<div class='modal-content'>
			<div class='modal-header'>
				<h1 class='modal-title fs-5' id='modalLabel'>Info de la compra</h1>
				<button type='button' class='btn-close' data-bs-dismiss='modal' aria-label='Close'></button>
			</div>
			<div class='modal-body'>
				Te llegara su ticket via email al realizar la compra.
			</div>
			<div class='modal-footer'>
				<button type='button' class='btn btn-primary' data-bs-dismiss='modal'>Cerrar</button>
			</div>
		</div>
	</div>
</div>
<script src='/js/carts.js'></script>